# drawing_text_run.h
<!--Kit: ArkGraphics 2D-->
<!--Subsystem: Graphics-->
<!--Owner: @oh_wangxk; @gmiao522; @Lem0nC-->
<!--Designer: @liumingxiang-->
<!--Tester: @yhl0101-->
<!--Adviser: @ge-yafang-->
## Overview

This file declares the capabilities of runs, such as obtaining the typographic boundary and drawing.

**File to include**: <native_drawing/drawing_text_run.h>

**Library**: libnative_drawing.so

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18

**Related module**: [Drawing](capi-drawing.md)

## Summary

### Functions

| Name| Description|
| -- | -- |
| [OH_Drawing_Array* OH_Drawing_GetRunStringIndices(OH_Drawing_Run* run, int64_t start, int64_t length)](#oh_drawing_getrunstringindices) | Obtains an array of character indices of glyphs within a specified range of a run, where the indices are offsets relative to the entire paragraph.|
| [uint64_t OH_Drawing_GetRunStringIndicesByIndex(OH_Drawing_Array* stringIndices, size_t index)](#oh_drawing_getrunstringindicesbyindex) | Obtains character indices of glyphs in a run by index.|
| [void OH_Drawing_DestroyRunStringIndices(OH_Drawing_Array* stringIndices)](#oh_drawing_destroyrunstringindices) | Releases the pointer to a character index array object.|
| [void OH_Drawing_GetRunStringRange(OH_Drawing_Run* run, uint64_t* location, uint64_t* length)](#oh_drawing_getrunstringrange) | Obtains the range of glyphs generated by a run.|
| [float OH_Drawing_GetRunTypographicBounds(OH_Drawing_Run* run, float* ascent, float* descent, float* leading)](#oh_drawing_getruntypographicbounds) | Obtains the typographic boundary of a run. The typographic boundary is related to the font and font size used for typography, but not the characters within the text.|
| [void OH_Drawing_RunPaint(OH_Drawing_Canvas* canvas, OH_Drawing_Run* run, double x, double y)](#oh_drawing_runpaint) | Paints the text contained in a run on the canvas.|
| [OH_Drawing_Rect* OH_Drawing_GetRunImageBounds(OH_Drawing_Run* run)](#oh_drawing_getrunimagebounds) | Obtains the image boundary of a run. The image boundary is related to characters and is equivalent to the visual boundary.|
| [void OH_Drawing_DestroyRunImageBounds(OH_Drawing_Rect* rect)](#oh_drawing_destroyrunimagebounds) | Releases the pointer to an image boundary object of a run.|
| [OH_Drawing_Array* OH_Drawing_GetRunGlyphs(OH_Drawing_Run* run, int64_t start, int64_t length)](#oh_drawing_getrunglyphs) | Obtains an array of glyphs within the specified range of a run.|
| [uint16_t OH_Drawing_GetRunGlyphsByIndex(OH_Drawing_Array* glyphs, size_t index)](#oh_drawing_getrunglyphsbyindex) | Obtains individual glyphs in a run by index.|
| [void OH_Drawing_DestroyRunGlyphs(OH_Drawing_Array* glyphs)](#oh_drawing_destroyrunglyphs) | Releases the pointer to a glyph array in a run.|
| [OH_Drawing_Array* OH_Drawing_GetRunPositions(OH_Drawing_Run* run, int64_t start, int64_t length)](#oh_drawing_getrunpositions) | Obtains the positions of glyphs within the specified range of a run.|
| [OH_Drawing_Point* OH_Drawing_GetRunPositionsByIndex(OH_Drawing_Array* positions, size_t index)](#oh_drawing_getrunpositionsbyindex) | Obtains the positions of individual glyphs in a run by index.|
| [void OH_Drawing_DestroyRunPositions(OH_Drawing_Array* positions)](#oh_drawing_destroyrunpositions) | Releases the pointer to a glyph position array in a run.|
| [uint32_t OH_Drawing_GetRunGlyphCount(OH_Drawing_Run* run)](#oh_drawing_getrunglyphcount) | Obtains the number of glyphs in a run.|
| [OH_Drawing_Font* OH_Drawing_GetRunFont(OH_Drawing_Run* run)](#oh_drawing_getrunfont) | Obtains the font object of a run.|
| [OH_Drawing_TextDirection OH_Drawing_GetRunTextDirection(OH_Drawing_Run* run)](#oh_drawing_getruntextdirection) | Obtains the text direction of a run.|
| [OH_Drawing_Array* OH_Drawing_GetRunGlyphAdvances(OH_Drawing_Run* run, uint32_t start, uint32_t length)](#oh_drawing_getrunglyphadvances) | Obtains the glyph advance array of a run.|
| [OH_Drawing_Point* OH_Drawing_GetRunGlyphAdvanceByIndex(OH_Drawing_Array* advances, size_t index)](#oh_drawing_getrunglyphadvancebyindex) | Obtains the advances of individual glyphs in a run by index.|
| [void OH_Drawing_DestroyRunGlyphAdvances(OH_Drawing_Array* advances)](#oh_drawing_destroyrunglyphadvances) | Releases the pointer to a glyph advance array in a run.|

## Function Description

### OH_Drawing_GetRunStringIndices()

```c
OH_Drawing_Array* OH_Drawing_GetRunStringIndices(OH_Drawing_Run* run, int64_t start, int64_t length)
```

**Description**

Obtains an array of character indices of glyphs within a specified range of a run, where the indices are offsets relative to the entire paragraph.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Run](capi-drawing-oh-drawing-run.md)* run | Pointer to an [OH_Drawing_Run](capi-drawing-oh-drawing-run.md) object.|
| int64_t start | Start position in the run. If a negative number is passed, a null pointer is returned.|
| int64_t length | Length of the range in the run. If the length is **0**, the array of all character indices in the run is obtained. If the length is less than 0, a null pointer is returned.|

**Returns**

| Type| Description|
| -- | -- |
| [OH_Drawing_Array](capi-drawing-oh-drawing-array.md)* | Returns the character index array of the glyph. Call [OH_Drawing_DestroyRunStringIndices](capi-drawing-text-run-h.md#oh_drawing_destroyrunstringindices) to release this pointer when the object is no longer needed.|

### OH_Drawing_GetRunStringIndicesByIndex()

```c
uint64_t OH_Drawing_GetRunStringIndicesByIndex(OH_Drawing_Array* stringIndices, size_t index)
```

**Description**

Obtains character indices of glyphs in a run by index.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Array](capi-drawing-oh-drawing-array.md)* stringIndices | Pointer to a character index array.|
| size_t index | Index of the character index array.|

**Returns**

| Type| Description|
| -- | -- |
| uint64_t | Returns the character indices.|

### OH_Drawing_DestroyRunStringIndices()

```c
void OH_Drawing_DestroyRunStringIndices(OH_Drawing_Array* stringIndices)
```

**Description**

Releases the pointer to a character index array object.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Array](capi-drawing-oh-drawing-array.md)* stringIndices | Pointer to a character index array.|

### OH_Drawing_GetRunStringRange()

```c
void OH_Drawing_GetRunStringRange(OH_Drawing_Run* run, uint64_t* location, uint64_t* length)
```

**Description**

Obtains the range of glyphs generated by a run.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Run](capi-drawing-oh-drawing-run.md)* run | Pointer to an [OH_Drawing_Run](capi-drawing-oh-drawing-run.md) object.|
| uint64_t* location | Start position of the range in the run, which is an offset relative to the entire paragraph.|
| uint64_t* length | Length of the range.|

### OH_Drawing_GetRunTypographicBounds()

```c
float OH_Drawing_GetRunTypographicBounds(OH_Drawing_Run* run, float* ascent, float* descent, float* leading)
```

**Description**

Obtains the typographic boundary of a run. The typographic boundary is related to the font and font size used for typography, but not the characters within the text.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Run](capi-drawing-oh-drawing-run.md)* run | Pointer to an [OH_Drawing_Run](capi-drawing-oh-drawing-run.md) object.|
| float* ascent | Distance from the top of the tallest character to the baseline in the run.|
| float* descent | Distance from the bottom of the lowest character to the baseline in the run.|
| float* leading | Vertical space between lines in the run.|

**Returns**

| Type| Description|
| -- | -- |
| float | Returns the layout width of the run.|

### OH_Drawing_RunPaint()

```c
void OH_Drawing_RunPaint(OH_Drawing_Canvas* canvas, OH_Drawing_Run* run, double x, double y)
```

**Description**

Paints the text contained in a run on the canvas.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Canvas](capi-drawing-oh-drawing-canvas.md)* canvas | Pointer to an [OH_Drawing_Canvas](capi-drawing-oh-drawing-canvas.md) object.|
| [OH_Drawing_Run](capi-drawing-oh-drawing-run.md)* run | Pointer to an [OH_Drawing_Run](capi-drawing-oh-drawing-run.md) object.|
| double x | X coordinate of the run.|
| double y | Y coordinate of the run.|

### OH_Drawing_GetRunImageBounds()

```c
OH_Drawing_Rect* OH_Drawing_GetRunImageBounds(OH_Drawing_Run* run)
```

**Description**

Obtains the image boundary of a run. The image boundary is related to characters and is equivalent to the visual boundary.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Run](capi-drawing-oh-drawing-run.md)* run | Pointer to an [OH_Drawing_Run](capi-drawing-oh-drawing-run.md) object.|

**Returns**

| Type| Description|
| -- | -- |
| [OH_Drawing_Rect](capi-drawing-oh-drawing-rect.md)* | Returns the pointer to an [OH_Drawing_Rect](capi-drawing-oh-drawing-rect.md) object. Call [OH_Drawing_DestroyRunImageBounds](capi-drawing-text-run-h.md#oh_drawing_destroyrunimagebounds) to release this pointer when the object is no longer needed.|

### OH_Drawing_DestroyRunImageBounds()

```c
void OH_Drawing_DestroyRunImageBounds(OH_Drawing_Rect* rect)
```

**Description**

Releases the pointer to an image boundary object of a run.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Rect](capi-drawing-oh-drawing-rect.md)* rect | Pointer to the image boundary, which is an [OH_Drawing_Rect](capi-drawing-oh-drawing-rect.md) object.|

### OH_Drawing_GetRunGlyphs()

```c
OH_Drawing_Array* OH_Drawing_GetRunGlyphs(OH_Drawing_Run* run, int64_t start, int64_t length)
```

**Description**

Obtains an array of glyphs within the specified range of a run.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Run](capi-drawing-oh-drawing-run.md)* run | Pointer to an [OH_Drawing_Run](capi-drawing-oh-drawing-run.md) object.|
| int64_t start | Start position in the run. If a negative number is passed, a null pointer is returned.|
| int64_t length | Length of the range in the run. If the length is **0**, all character indices of the run are obtained. If the length is less than 0, a null pointer is returned.|

**Returns**

| Type| Description|
| -- | -- |
| [OH_Drawing_Array](capi-drawing-oh-drawing-array.md)* | Returns the pointer to an [OH_Drawing_Array](capi-drawing-oh-drawing-array.md) object of a glyph array in a run. Call [OH_Drawing_DestroyRunGlyphs](capi-drawing-text-run-h.md#oh_drawing_destroyrunglyphs) to release this pointer when the object is no longer needed.|

### OH_Drawing_GetRunGlyphsByIndex()

```c
uint16_t OH_Drawing_GetRunGlyphsByIndex(OH_Drawing_Array* glyphs, size_t index)
```

**Description**

Obtains individual glyphs in a run by index.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Array](capi-drawing-oh-drawing-array.md)* glyphs | Pointer to the glyph array, which is an [OH_Drawing_Array](capi-drawing-oh-drawing-array.md) object.|
| size_t index | Index of the glyph array.|

**Returns**

| Type| Description|
| -- | -- |
| uint16_t | Returns the individual glyphs.|

### OH_Drawing_DestroyRunGlyphs()

```c
void OH_Drawing_DestroyRunGlyphs(OH_Drawing_Array* glyphs)
```

**Description**

Releases the pointer to a glyph array in a run.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Array](capi-drawing-oh-drawing-array.md)* glyphs | Pointer to the glyph array, which is an [OH_Drawing_Array](capi-drawing-oh-drawing-array.md) object.|

### OH_Drawing_GetRunPositions()

```c
OH_Drawing_Array* OH_Drawing_GetRunPositions(OH_Drawing_Run* run, int64_t start, int64_t length)
```

**Description**

Obtains the positions of glyphs within the specified range of a run.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Run](capi-drawing-oh-drawing-run.md)* run | Pointer to an [OH_Drawing_Run](capi-drawing-oh-drawing-run.md) object.|
| int64_t start | Start position in the run. If a negative number is passed, a null pointer is returned.|
| int64_t length | Length of the range in the run. If the length is **0**, all character indices of the run are obtained. If the length is less than 0, a null pointer is returned.|

**Returns**

| Type| Description|
| -- | -- |
| [OH_Drawing_Array](capi-drawing-oh-drawing-array.md)* | Returns the pointer to an [OH_Drawing_Array](capi-drawing-oh-drawing-array.md) object of a glyph position array in a run. Call [OH_Drawing_DestroyRunPositions](capi-drawing-text-run-h.md#oh_drawing_destroyrunpositions) to release this pointer when the object is no longer needed.|

### OH_Drawing_GetRunPositionsByIndex()

```c
OH_Drawing_Point* OH_Drawing_GetRunPositionsByIndex(OH_Drawing_Array* positions, size_t index)
```

**Description**

Obtains the positions of individual glyphs in a run by index.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Array](capi-drawing-oh-drawing-array.md)* positions | Pointer to the glyph position array, which is an [OH_Drawing_Array](capi-drawing-oh-drawing-array.md) object.|
| size_t index | Index of the glyph position array in the run.|

**Returns**

| Type| Description|
| -- | -- |
| [OH_Drawing_Point](capi-drawing-oh-drawing-point.md)* | Returns the pointer to an [OH_Drawing_Point](capi-drawing-oh-drawing-point.md) object, which holds the positions of individual glyphs in the run.|

### OH_Drawing_DestroyRunPositions()

```c
void OH_Drawing_DestroyRunPositions(OH_Drawing_Array* positions)
```

**Description**

Releases the pointer to a glyph position array in a run.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Array](capi-drawing-oh-drawing-array.md)* positions | Pointer to the glyph position array, which is an [OH_Drawing_Array](capi-drawing-oh-drawing-array.md) object.|

### OH_Drawing_GetRunGlyphCount()

```c
uint32_t OH_Drawing_GetRunGlyphCount(OH_Drawing_Run* run)
```

**Description**

Obtains the number of glyphs in a run.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Run](capi-drawing-oh-drawing-run.md)* run | Pointer to an [OH_Drawing_Run](capi-drawing-oh-drawing-run.md) object.|

**Returns**

| Type| Description|
| -- | -- |
| uint32_t | Returns the number of glyphs.|

### OH_Drawing_GetRunFont()

```c
OH_Drawing_Font* OH_Drawing_GetRunFont(OH_Drawing_Run* run)
```

**Description**

Obtains the font object of a run.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 20

**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Run](capi-drawing-oh-drawing-run.md)* run | Pointer to an [OH_Drawing_Run](capi-drawing-oh-drawing-run.md) object.|

**Returns**

| Type| Description|
| -- | -- |
| [OH_Drawing_Font](capi-drawing-oh-drawing-font.md)* | Returns the pointer to an [OH_Drawing_Font](capi-drawing-oh-drawing-font.md) object in a run. Call [OH_Drawing_FontDestroy](capi-drawing-font-h.md#oh_drawing_fontdestroy) to release this pointer when the object is no longer needed.|

### OH_Drawing_GetRunTextDirection()

```c
OH_Drawing_TextDirection OH_Drawing_GetRunTextDirection(OH_Drawing_Run* run)
```

**Description**

Obtains the text direction of a run.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 20

**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Run](capi-drawing-oh-drawing-run.md)* run | Pointer to an [OH_Drawing_Run](capi-drawing-oh-drawing-run.md) object.|

**Returns**

| Type| Description|
| -- | -- |
| [OH_Drawing_TextDirection](capi-drawing-text-typography-h.md#oh_drawing_textdirection) | Returns the text direction of a run. **0**: **TEXT_DIRECTION_RTL**, which means right-to-left; **1**: **TEXT_DIRECTION_LTR**, which means left-to-right. For details, see [OH_Drawing_TextDirection](capi-drawing-text-typography-h.md#oh_drawing_textdirection).|

### OH_Drawing_GetRunGlyphAdvances()

```c
OH_Drawing_Array* OH_Drawing_GetRunGlyphAdvances(OH_Drawing_Run* run, uint32_t start, uint32_t length)
```

**Description**

Obtains the glyph advance array of a run.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 20


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Run](capi-drawing-oh-drawing-run.md)* run | Pointer to an [OH_Drawing_Run](capi-drawing-oh-drawing-run.md) object.|
| uint32_t start | Start position in the run. If a negative number is passed, a null pointer is returned.|
| uint32_t length | Length of the range in the run. If the length is **0**, all glyph advances from the start to the end of the run are obtained. If the length is less than 0, a null pointer is returned.|

**Returns**

| Type| Description|
| -- | -- |
| [OH_Drawing_Array](capi-drawing-oh-drawing-array.md)* | Returns the pointer to an [OH_Drawing_Array](capi-drawing-oh-drawing-array.md) object of a glyph advance array in a run. Call [OH_Drawing_DestroyRunGlyphAdvances](capi-drawing-text-run-h.md#oh_drawing_destroyrunglyphadvances) to release this pointer when the object is no longer needed.|


### OH_Drawing_GetRunGlyphAdvanceByIndex()

```c
OH_Drawing_Point* OH_Drawing_GetRunGlyphAdvanceByIndex(OH_Drawing_Array* advances, size_t index)
```

**Description**

Obtains the advances of individual glyphs in a run by index.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 20


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Array](capi-drawing-oh-drawing-array.md)* advances | Pointer to the glyph advance array, which is an [OH_Drawing_Array](capi-drawing-oh-drawing-array.md) object.|
| size_t index | Index of the glyph advance array in a run.|

**Returns**

| Type| Description|
| -- | -- |
| [OH_Drawing_Point](capi-drawing-oh-drawing-point.md)* | Returns the pointer to an [OH_Drawing_Point](capi-drawing-oh-drawing-point.md) object, which holds the advance of individual glyphs in the run. **x** indicates the advance, and **y** is a reserved field and defaults to **0**.|

### OH_Drawing_DestroyRunGlyphAdvances()

```c
void OH_Drawing_DestroyRunGlyphAdvances(OH_Drawing_Array* advances)
```

**Description**

Releases the pointer to a glyph advance array in a run.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 20


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Array](capi-drawing-oh-drawing-array.md)* advances | Pointer to the glyph advance array, which is an [OH_Drawing_Array](capi-drawing-oh-drawing-array.md) object.|
