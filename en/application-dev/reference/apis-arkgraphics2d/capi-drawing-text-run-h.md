# drawing_text_run.h
<!--Kit: ArkGraphics 2D-->
<!--Subsystem: Graphics-->
<!--Owner: @oh_wangxk; @gmiao522; @Lem0nC-->
<!--Designer: @liumingxiang-->
<!--Tester: @yhl0101-->
<!--Adviser: @ge-yafang-->
## Overview

Provides APIs related to the font rendering unit, such as the drawing function and function of obtaining the layout boundary.

**Header file**: <native_drawing/drawing_text_run.h>

**Library**: libnative_drawing.so

**Since**: 18

**Related module**: [Drawing](capi-drawing.md)

## Total

### Functions

| Name| Description|
| -- | -- |
| [OH_Drawing_Array* OH_Drawing_GetRunStringIndices(OH_Drawing_Run* run, int64_t start, int64_t length)](#oh_drawing_getrunstringindices) | Obtains an array of character indices of glyphs within a specified range of a run, where the indices are offsets relative to the entire paragraph.|
| [uint64_t OH_Drawing_GetRunStringIndicesByIndex(OH_Drawing_Array* stringIndices, size_t index)](#oh_drawing_getrunstringindicesbyindex) | Obtains character indices of glyphs in a run by index.|
| [void OH_Drawing_DestroyRunStringIndices(OH_Drawing_Array* stringIndices)](#oh_drawing_destroyrunstringindices) | Releases the pointer to a character index array.|
| [void OH_Drawing_GetRunStringRange(OH_Drawing_Run* run, uint64_t* location, uint64_t* length)](#oh_drawing_getrunstringrange) | Obtains the range of glyphs generated by a run.|
| [float OH_Drawing_GetRunTypographicBounds(OH_Drawing_Run* run, float* ascent, float* descent, float* leading)](#oh_drawing_getruntypographicbounds) | Obtains the typographic boundary of a run. The typographic boundary is related to the font and font size used for typography, but not the characters within the text.|
| [void OH_Drawing_RunPaint(OH_Drawing_Canvas* canvas, OH_Drawing_Run* run, double x, double y)](#oh_drawing_runpaint) | Paints the text contained in a run on the canvas.|
| [OH_Drawing_Rect* OH_Drawing_GetRunImageBounds(OH_Drawing_Run* run)](#oh_drawing_getrunimagebounds) | Obtains the image boundary of a run. The image boundary is related to characters and is equivalent to the visual boundary.|
| [void OH_Drawing_DestroyRunImageBounds(OH_Drawing_Rect* rect)](#oh_drawing_destroyrunimagebounds) | Releases the pointer to an image boundary object of a run.|
| [OH_Drawing_Array* OH_Drawing_GetRunGlyphs(OH_Drawing_Run* run, int64_t start, int64_t length)](#oh_drawing_getrunglyphs) | Obtains an array of glyphs within the specified range of a run.|
| [uint16_t OH_Drawing_GetRunGlyphsByIndex(OH_Drawing_Array* glyphs, size_t index)](#oh_drawing_getrunglyphsbyindex) | Obtains individual glyphs in a run by index.|
| [void OH_Drawing_DestroyRunGlyphs(OH_Drawing_Array* glyphs)](#oh_drawing_destroyrunglyphs) | Releases the pointer to a glyph array in a run.|
| [OH_Drawing_Array* OH_Drawing_GetRunPositions(OH_Drawing_Run* run, int64_t start, int64_t length)](#oh_drawing_getrunpositions) | Obtains the positions of glyphs within the specified range of a run.|
| [OH_Drawing_Point* OH_Drawing_GetRunPositionsByIndex(OH_Drawing_Array* positions, size_t index)](#oh_drawing_getrunpositionsbyindex) | Obtains the positions of individual glyphs in a run by index.|
| [void OH_Drawing_DestroyRunPositions(OH_Drawing_Array* positions)](#oh_drawing_destroyrunpositions) | Releases the pointer to a glyph position array in a run.|
| [uint32_t OH_Drawing_GetRunGlyphCount(OH_Drawing_Run* run)](#oh_drawing_getrunglyphcount) | Obtains the number of glyphs in a run.|
| [OH_Drawing_Font* OH_Drawing_GetRunFont(OH_Drawing_Run* run)](#oh_drawing_getrunfont) | Obtains the font object of a rendering unit.|
| [OH_Drawing_TextDirection OH_Drawing_GetRunTextDirection(OH_Drawing_Run* run)](#oh_drawing_getruntextdirection) | Obtains the text direction of a rendering unit.|
| [OH_Drawing_Array* OH_Drawing_GetRunGlyphAdvances(OH_Drawing_Run* run, uint32_t start, uint32_t length)](#oh_drawing_getrunglyphadvances) | Obtains the font width array of a rendering unit.|
| [OH_Drawing_Point* OH_Drawing_GetRunGlyphAdvanceByIndex(OH_Drawing_Array* advances, size_t index)](#oh_drawing_getrunglyphadvancebyindex) | Obtains the width of a single glyph in a rendering unit based on the index.|
| [void OH_Drawing_DestroyRunGlyphAdvances(OH_Drawing_Array* advances)](#oh_drawing_destroyrunglyphadvances) | Releases the pointer to the glyph width array object in a rendering unit.|

## Function Description

### OH_Drawing_GetRunStringIndices()

```
OH_Drawing_Array* OH_Drawing_GetRunStringIndices(OH_Drawing_Run* run, int64_t start, int64_t length)
```

**Description**

Obtains an array of character indices of glyphs within a specified range of a run, where the indices are offsets relative to the entire paragraph.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Run](capi-drawing-oh-drawing-run.md)* run | Pointer to the [OH_Drawing_Run](capi-drawing-oh-drawing-run.md) object of a rendering unit.|
| int64_t start | Start position in the run. If a negative number is passed, a null pointer is returned.|
| int64_t length | Length specified in a rendering unit. If length is 0, the character index array of all glyphs in the rendering unit is obtained. If length is less than 0, this method returns a null pointer.|

**Return value**

| Type| Description|
| -- | -- |
| [OH_Drawing_Array](capi-drawing-oh-drawing-array.md)* | Returns the character index array of the glyph. Use [OH_Drawing_DestroyRunStringIndices](capi-drawing-text-run-h.md#oh_drawing_destroyrunstringindices) API to release the pointer of the [OH_Drawing_Array](capi-drawing-oh-drawing-array.md) when it is no longer needed.|

### OH_Drawing_GetRunStringIndicesByIndex()

```
uint64_t OH_Drawing_GetRunStringIndicesByIndex(OH_Drawing_Array* stringIndices, size_t index)
```

**Description**

Obtains character indices of glyphs in a run by index.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Array](capi-drawing-oh-drawing-array.md)* stringIndices | Pointer to a character index array.|
| size_t index | Index of the character index array.|

**Return value**

| Type| Description|
| -- | -- |
| uint64_t | Character index of a single glyph in the rendering unit.|

### OH_Drawing_DestroyRunStringIndices()

```
void OH_Drawing_DestroyRunStringIndices(OH_Drawing_Array* stringIndices)
```

**Description**

Releases the pointer to a character index array object.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Array](capi-drawing-oh-drawing-array.md)* stringIndices | Pointer to a character index array.|

### OH_Drawing_GetRunStringRange()

```
void OH_Drawing_GetRunStringRange(OH_Drawing_Run* run, uint64_t* location, uint64_t* length)
```

**Description**

Obtains the range of glyphs generated by a run.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Run](capi-drawing-oh-drawing-run.md)* run | Pointer to the rendering unit [OH_Drawing_Run](capi-drawing-oh-drawing-run.md) object.|
| uint64_t* location | Start position of the range in the run, which is an offset relative to the entire paragraph.|
| uint64_t* length | Length of the range.|

### OH_Drawing_GetRunTypographicBounds()

```
float OH_Drawing_GetRunTypographicBounds(OH_Drawing_Run* run, float* ascent, float* descent, float* leading)
```

**Description**

Obtains the typographic boundary of a run. The typographic boundary is related to the font and font size used for typography, but not the characters within the text.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Run](capi-drawing-oh-drawing-run.md)* run | Pointer to the rendering unit [OH_Drawing_Run](capi-drawing-oh-drawing-run.md) object.|
| float* ascent | Distance from the top of the tallest character to the baseline in the run.|
| float* descent | Distance from the bottom of the lowest character to the baseline in the run.|
| float* leading | Vertical space between lines in the run.|

**Return value**

| Type| Description|
| -- | -- |
| float | Typesetting width of the rendering unit.|

### OH_Drawing_RunPaint()

```
void OH_Drawing_RunPaint(OH_Drawing_Canvas* canvas, OH_Drawing_Run* run, double x, double y)
```

**Description**

Paints the text contained in a run on the canvas.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Canvas](capi-drawing-oh-drawing-canvas.md)* canvas | Pointer to the [OH_Drawing_Canvas](capi-drawing-oh-drawing-canvas.md) object of the canvas.|
| [OH_Drawing_Run](capi-drawing-oh-drawing-run.md)* run | Pointer to the [OH_Drawing_Run](capi-drawing-oh-drawing-run.md) object of the rendering unit.|
| double x | X coordinate of the run.|
| double y | Y coordinate of the run.|

### OH_Drawing_GetRunImageBounds()

```
OH_Drawing_Rect* OH_Drawing_GetRunImageBounds(OH_Drawing_Run* run)
```

**Description**

Obtains the image boundary of a run. The image boundary is related to characters and is equivalent to the visual boundary.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Run](capi-drawing-oh-drawing-run.md)* run | Pointer to the [OH_Drawing_Run](capi-drawing-oh-drawing-run.md) object of the rendering unit.|

**Return value**

| Type| Description|
| -- | -- |
| [OH_Drawing_Rect](capi-drawing-oh-drawing-rect.md)* | Returns a pointer to the [OH_Drawing_Rect](capi-drawing-oh-drawing-rect.md) object of the rendering unit image boundary. When the [OH_Drawing_Rect](capi-drawing-oh-drawing-rect.md) object is no longer needed, use [OH_Drawing_DestroyRunImageBounds](capi-drawing-text-run-h.md#oh_drawing_destroyrunimagebounds) API to release the pointer to the object.|

### OH_Drawing_DestroyRunImageBounds()

```
void OH_Drawing_DestroyRunImageBounds(OH_Drawing_Rect* rect)
```

**Description**

Releases the pointer to an image boundary object of a run.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Rect](capi-drawing-oh-drawing-rect.md)* rect | Pointer to the [OH_Drawing_Rect](capi-drawing-oh-drawing-rect.md) object of the rendering unit image boundary.|

### OH_Drawing_GetRunGlyphs()

```
OH_Drawing_Array* OH_Drawing_GetRunGlyphs(OH_Drawing_Run* run, int64_t start, int64_t length)
```

**Description**

Obtains an array of glyphs within the specified range of a run.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Run](capi-drawing-oh-drawing-run.md)* run | Pointer to the [OH_Drawing_Run](capi-drawing-oh-drawing-run.md) object of the rendering unit.|
| int64_t start | Start position in the run. If a negative number is passed, a null pointer is returned.|
| int64_t length | Length of the range in the run. If the length is 0, all character indices of the run are obtained. If the length is less than 0, a null pointer is returned.|

**Return value**

| Type| Description|
| -- | -- |
| [OH_Drawing_Array](capi-drawing-oh-drawing-array.md)* | Pointer to the [OH_Drawing_Array](capi-drawing-oh-drawing-array.md) object of the rendering unit. If the [OH_Drawing_Array](capi-drawing-oh-drawing-array.md) object is no longer needed, use [OH_Drawing_DestroyRunGlyphs](capi-drawing-text-run-h.md#oh_drawing_destroyrunglyphs) API to release the pointer to the object.|

### OH_Drawing_GetRunGlyphsByIndex()

```
uint16_t OH_Drawing_GetRunGlyphsByIndex(OH_Drawing_Array* glyphs, size_t index)
```

**Description**

Obtains individual glyphs in a run by index.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Array](capi-drawing-oh-drawing-array.md)* glyphs | Pointer to the [OH_Drawing_Array](capi-drawing-oh-drawing-array.md) object of the rendering unit.|
| size_t index | Index of the glyph array.|

**Return value**

| Type| Description|
| -- | -- |
| uint16_t | A single glyph of a rendering unit.|

### OH_Drawing_DestroyRunGlyphs()

```
void OH_Drawing_DestroyRunGlyphs(OH_Drawing_Array* glyphs)
```

**Description**

Releases the pointer to a glyph array in a run.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Array](capi-drawing-oh-drawing-array.md)* glyphs | Pointer to the [OH_Drawing_Array](capi-drawing-oh-drawing-array.md) object of the glyph array in the rendering unit.|

### OH_Drawing_GetRunPositions()

```
OH_Drawing_Array* OH_Drawing_GetRunPositions(OH_Drawing_Run* run, int64_t start, int64_t length)
```

**Description**

Obtains the positions of glyphs within the specified range of a run.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Run](capi-drawing-oh-drawing-run.md)* run | Pointer to the [OH_Drawing_Run](capi-drawing-oh-drawing-run.md) object in the rendering unit.|
| int64_t start | Start position in the run. If a negative number is passed, a null pointer is returned.|
| int64_t length | Length of the range in the run. If the length is 0, all character indices of the run are obtained. If the length is less than 0, a null pointer is returned.|

**Return value**

| Type| Description|
| -- | -- |
| [OH_Drawing_Array](capi-drawing-oh-drawing-array.md)* | Pointer to the [OH_Drawing_Array](capi-drawing-oh-drawing-array.md) object of the glyph position array in the rendering unit. If the [OH_Drawing_Array](capi-drawing-oh-drawing-array.md) object is no longer needed, use [OH_Drawing_DestroyRunPositions](capi-drawing-text-run-h.md#oh_drawing_destroyrunpositions) API to release the pointer to the object.|

### OH_Drawing_GetRunPositionsByIndex()

```
OH_Drawing_Point* OH_Drawing_GetRunPositionsByIndex(OH_Drawing_Array* positions, size_t index)
```

**Description**

Obtains the positions of individual glyphs in a run by index.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Array](capi-drawing-oh-drawing-array.md)* positions | Pointer to the [OH_Drawing_Array](capi-drawing-oh-drawing-array.md) object of the glyph position array in the rendering unit.|
| size_t index | Index of the glyph position array in the run.|

**Return value**

| Type| Description|
| -- | -- |
| [OH_Drawing_Point](capi-drawing-oh-drawing-point.md)* | Pointer to the [OH_Drawing_Point](capi-drawing-oh-drawing-point.md) object of a single glyph position in the rendering unit.|

### OH_Drawing_DestroyRunPositions()

```
void OH_Drawing_DestroyRunPositions(OH_Drawing_Array* positions)
```

**Description**

Releases the pointer to a glyph position array in a run.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Array](capi-drawing-oh-drawing-array.md)* positions | Pointer to the [OH_Drawing_Array](capi-drawing-oh-drawing-array.md) object of the glyph position array in the rendering unit.|

### OH_Drawing_GetRunGlyphCount()

```
uint32_t OH_Drawing_GetRunGlyphCount(OH_Drawing_Run* run)
```

**Description**

Obtains the number of glyphs in a run.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 18


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Run](capi-drawing-oh-drawing-run.md)* run | Pointer to the [OH_Drawing_Run](capi-drawing-oh-drawing-run.md) object of the rendering unit.|

**Return value**

| Type| Description|
| -- | -- |
| uint32_t | Number of glyphs of the rendering unit.|

### OH_Drawing_GetRunFont()

```
OH_Drawing_Font* OH_Drawing_GetRunFont(OH_Drawing_Run* run)
```

**Description**

Obtains the font object of the rendering unit.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 20

**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Run](capi-drawing-oh-drawing-run.md)* run | Pointer to the [OH_Drawing_Run](capi-drawing-oh-drawing-run.md) object of the rendering unit.|

**Return value**

| Type| Description|
| -- | -- |
| [OH_Drawing_Font](capi-drawing-oh-drawing-font.md)* | Pointer to the [OH_Drawing_Font](capi-drawing-oh-drawing-font.md) object of the font of the rendering unit. If the [OH_Drawing_Font](capi-drawing-oh-drawing-font.md) object is no longer needed, use [OH_Drawing_FontDestroy](capi-drawing-font-h.md#oh_drawing_fontdestroy) API to release the pointer to the object.|

### OH_Drawing_GetRunTextDirection()

```
OH_Drawing_TextDirection OH_Drawing_GetRunTextDirection(OH_Drawing_Run* run)
```

**Description**

Obtains the text direction of the rendering unit.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 20

**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Run](capi-drawing-oh-drawing-run.md)* run | Pointer to the [OH_Drawing_Run](capi-drawing-oh-drawing-run.md) object of the rendering unit.|

**Return value**

| Type| Description|
| -- | -- |
| [OH_Drawing_TextDirection](capi-drawing-text-typography-h.md#oh_drawing_textdirection) | Text direction of the rendering unit. 0: TEXT_DIRECTION_RTL, from right to left; 1: TEXT_DIRECTION_LTR, from left to right. For details, see the [OH_Drawing_TextDirection](capi-drawing-text-typography-h.md#oh_drawing_textdirection) enumeration.|

### OH_Drawing_GetRunGlyphAdvances()

```
OH_Drawing_Array* OH_Drawing_GetRunGlyphAdvances(OH_Drawing_Run* run, uint32_t start, uint32_t length)
```

**Description**

Obtains the font width array of the rendering unit.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 20


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Run](capi-drawing-oh-drawing-run.md)* run | Pointer to the [OH_Drawing_Run](capi-drawing-oh-drawing-run.md) object of the rendering unit.|
| uint32_t start | Start position in the run. If a negative number is passed, a null pointer is returned.|
| uint32_t length | Length specified in the rendering unit. If length is 0, the method obtains the rendering block from start to end. If length is less than 0, this method returns a null pointer.|

**Return value**

| Type| Description|
| -- | -- |
| [OH_Drawing_Array](capi-drawing-oh-drawing-array.md)* | Returns a pointer to the [OH_Drawing_Array](capi-drawing-oh-drawing-array.md) object of the glyph position array in the rendering unit. When the [OH_Drawing_Array](capi-drawing-oh-drawing-array.md) object is no longer needed, use [OH_Drawing_DestroyRunGlyphAdvances](capi-drawing-text-run-h.md#oh_drawing_destroyrunglyphadvances) API to release the pointer to the object.|


### OH_Drawing_GetRunGlyphAdvanceByIndex()

```
OH_Drawing_Point* OH_Drawing_GetRunGlyphAdvanceByIndex(OH_Drawing_Array* advances, size_t index)
```

**Description**

Obtains the width of a single glyph in the rendering unit based on the index.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 20


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Array](capi-drawing-oh-drawing-array.md)* advances | Pointer to the [OH_Drawing_Array](capi-drawing-oh-drawing-array.md) object of the glyph width array in the rendering unit.|
| size_t index | Index of the glyph width array in the rendering unit.|

**Return value**

| Type| Description|
| -- | -- |
| [OH_Drawing_Point](capi-drawing-oh-drawing-point.md)* | Pointer to the [OH_Drawing_Point](capi-drawing-oh-drawing-point.md) object of the width of a single glyph in the rendering unit. The x value of the [OH_Drawing_Point](capi-drawing-oh-drawing-point.md) object indicates the width of a single glyph in the rendering unit, and the y value is a reserved field and returns 0 by default.|

### OH_Drawing_DestroyRunGlyphAdvances()

```
void OH_Drawing_DestroyRunGlyphAdvances(OH_Drawing_Array* advances)
```

**Description**

Releases the pointer to the font width array object of the rendering unit.

**System capability**: SystemCapability.Graphic.Graphic2D.NativeDrawing

**Since**: 20


**Parameters**

| Name| Description|
| -- | -- |
| [OH_Drawing_Array](capi-drawing-oh-drawing-array.md)* advances | Pointer to the font width array [OH_Drawing_Array](capi-drawing-oh-drawing-array.md) object of the rendering unit.|
